# 연소 실험 추력 테스트 모듈

## 개요
이 프로젝트는 아두이노 기반의 연소 실험 추력 테스트 모듈로, HX711 로드셀 모듈을 사용하여 무게를 측정하고, HM-10 블루투스 모듈을 통해 명령을 수신하여 데이터를 저장하고 처리합니다. LCD 디스플레이와 블루 LED를 통해 사용자와 인터페이스하며, SD 카드에 측정 데이터를 기록합니다.

## 준비물
- **아두이노 나노** - 마이크로컨트롤러
- **HX711 로드셀 엠프 모듈** - 무게 측정
- **HM-10 모듈** - 블루투스 통신
- **Liquid Crystal I2C 모듈** - 무게 표시
- **USB 모듈** - 측정값 데이터 저장
- **파랑색 LED** - 블루투스 연결 확인
- **9V 배터리 홀더 및 스위치** - 전원공급
- **원형 수평계** - 수평 유지

**참고:** 아두이노 나노 33 BLE SENSE를 사용할 경우, 아두이노 나노 및 HM-10 모듈은 불필요합니다.

## 회로도
> 회로도는 금요일에 추가 예정입니다.

## 알고리즘
1. 전원 공급 시 HM-10 블루투스 모듈이 페어링 대기 상태로 전환되며, 로드셀 모듈의 영점을 조절합니다.
2. HM-10 블루투스 모듈과의 연결이 성공하면 블루 LED가 켜집니다. 연결 실패 시, LED가 5초 간격으로 5번 깜빡입니다.

## 명령어
블루투스 시리얼 모니터 또는 앱을 통해 다음 명령어를 사용할 수 있습니다:
- **“Setting ZeroPoint”** - 영점 조절
- **“Start Sensor”** - 모듈 측정 시작 및 파일 열기, 데이터 저장
- **“Stop Sensor”** - 모듈 측정 중지 및 파일 닫기
- **“File Open”** - 파일 열기
- **“Debugger Mode On”** - 디버깅 메시지 출력 활성화
- **“Debugger Mode Off”** - 디버깅 메시지 출력 비활성화
- **“Restart Module”** - 모듈 재시작 

## 사용 방법
1. **전원 공급 및 초기화**
   - 전원을 공급하고 아두이노가 초기화될 때, HM-10 모듈이 블루투스 장비와 페어링을 시도합니다.
   - 로드셀 모듈의 영점을 설정합니다.

2. **블루투스 연결 확인**
   - 블루투스 연결이 성공하면 블루 LED가 켜집니다. 실패할 경우, LED가 5초 간격으로 5번 깜빡입니다.

3. **명령어 입력**
   - 블루투스 시리얼 모니터 또는 앱을 통해 명령어를 전송하여 모듈의 동작을 제어합니다.

## 전용 애플리케이션 (apk 파일)
> 제작 중에 있습니다

## 코드 설명
- **`setup()`**: 초기 설정, HX711 및 Bluetooth 초기화, LCD 디스플레이 및 SD 카드 모듈 초기화
- **`loop()`**: Bluetooth 명령어 수신 및 처리, 로드셀 데이터를 측정하여 SD 카드에 저장
- **명령어 처리 함수**: 각 명령어에 대한 처리 로직 (영점 조절, 센서 시작/중지, 파일 열기, 디버깅 모드 조정)
- **`calibrate()`**: 로드셀의 영점을 설정
- **`sendFeedback()`**: 명령어 실행 결과를 시리얼 모니터 및 Bluetooth를 통해 피드백
- **`sendDebugMessage()`**: 디버깅 메시지를 Bluetooth를 통해 전송

## 주의사항
- SD 카드의 파일 이름은 `"ThrustData.csv"`로 고정되어 있으며, 파일이 이미 존재할 경우, 새로운 데이터가 추가됩니다.
- 디버깅 모드는 `Debugger Mode On` 명령어를 통해 활성화되며, 이를 통해 데이터 기록 및 처리 중 발생하는 문제를 확인할 수 있습니다.
- 영점 조절을 위해 로드셀에서 모든 물체를 제거하고 `calibrate()` 함수에 의해 영점이 설정되도록 합니다.

## 기여
이 프로젝트에 기여하거나 문제를 발견한 경우, [프로젝트 리포지토리](#)를 방문하거나 관련 문서에 대한 피드백을 제공해 주세요.
